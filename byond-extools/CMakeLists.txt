cmake_minimum_required(VERSION 3.15.0)
project(byond-extools)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

add_library(byond-extools SHARED src/core/sigscan/sigscan.cpp src/core/core.cpp src/core/find_functions.cpp src/core/hooking.cpp src/core/proc_management.cpp dllmain.cpp src/tffi/tffi.cpp)
if (WIN32)
    set_property(TARGET byond-extools PROPERTY MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>")
    target_include_directories(byond-extools PUBLIC src/polyhook)
    target_link_directories(byond-extools PUBLIC src/polyhook)
    target_link_libraries(byond-extools asmjit)
    target_link_libraries(byond-extools capstone)
    target_link_libraries(byond-extools PolyHook_2)
endif()